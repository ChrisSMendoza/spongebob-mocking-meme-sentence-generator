<!DOCTYPE html>
<html>

<head>

    <meta charset="UTF-8">

</head>

<body>

    <h1>Spongebob Mock Meme Generate</h1>

    <p id="spongebob-mock-formatted-text"></p>

    <input type="text" id="textInput" />

    <button id="copy-to-clipboard-button">Copy</button>

</body>

<style>
    #generate-spongebob-meme-iframe {
        /* TODO: do not leave as vh units */
        height: 80vh;
        width: 80%;
    }
</style>


<script type="text/javascript">
    function flipACoin() {
        // This magic number is okay because you're a wizard Harry.
        return Math.floor(Math.random() * 2); // 0 or 1
    }

    function spongebobMockMemeGenerate(text) {
        const lettersForMeme = [];

        for (var i = 0; i < text.length; i++) {
            const letter = text.charAt(i);

            // We favor lowercase letters since it looks better 

            if (Math.random() < .30) {
                lettersForMeme.push(letter.toUpperCase());
            } else {
                lettersForMeme.push(letter.toLowerCase());
            }
        }
        return lettersForMeme.join("");
    }

    function showMockMemeText(event) {
        const userText = event.target.value;

        const mockMemeText = spongebobMockMemeGenerate(userText);

        const displayText = document.querySelector("#spongebob-mock-formatted-text");

        displayText.textContent = mockMemeText;
    }

    const textInput = document.querySelector("#textInput");
    textInput.addEventListener("input", showMockMemeText);

    const copyToClipboardButton = document.querySelector("#copy-to-clipboard-button");
    copyToClipboardButton.addEventListener("click", handleOnCopyToClipboard)

    function handleOnCopyToClipboard(event) {
        // Consideration: can't we just run the logic ourselves?
        // No, because that would generate another one, so it wouldn't 
        // match what's on the screen... Update the output text too??

        // Get the meme formatted text that's shown to the user
        const { textContent: spongebobMockMemeText } = document.querySelector("#spongebob-mock-formatted-text");

        // Copy the text to their clipboard, user can paste it now
        navigator.clipboard.writeText(spongebobMockMemeText);
    }
</script>

</html>