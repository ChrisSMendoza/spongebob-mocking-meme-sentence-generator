<!DOCTYPE html>
<html>

<head>

    <meta charset="UTF-8">

    <!-- Responsive viewport meta tag, part of Bulma setup -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">

</head>

<body>
    <section class="section">

        <div class="container">

            <h1 class="title">Spongebob Mock Meme Generate</h1>

            <p id="spongebob-mock-formatted-text"></p>

            <!-- Text input and copy button are on the same line -->
            <div class="field is-grouped">
                <div class="control">
                    <input type="text" id="textInput" class="input" />
                </div>
                <div class="control">
                    <button id="copy-to-clipboard-button" class="button is-primary">Copy</button>
                </div>
            </div>

            <div>
                <a href="https://imgflip.com/memegenerator/102723630/triggerpaul">Visit meme generator to paste
                    results</a>

                <!-- Let the user know about the generator's annoying defaults -->
                <div class="notification is-info is-light">
                    The generator only uses capital letters by default.
                    Click the settings icon,
                    <svg class="settings-icon" viewBox="0 0 22 22">
                        <path
                            d="M18.92 9.63a.33.33 0 0 0-.22-.13l-1.9-.3c-.1-.32-.25-.67-.43-1.01.12-.18.31-.42.56-.74.25-.31.43-.54.53-.69a.4.4 0 0 0 .09-.24c0-.1-.03-.17-.08-.23-.25-.35-.82-.94-1.72-1.77a.4.4 0 0 0-.26-.1c-.1 0-.18.03-.25.09l-1.48 1.11c-.28-.14-.6-.27-.93-.38l-.3-1.92a.3.3 0 0 0-.11-.22.4.4 0 0 0-.26-.09H9.85c-.2 0-.33.1-.38.3-.09.34-.19.98-.3 1.93-.33.1-.64.23-.95.4L6.78 4.51a.44.44 0 0 0-.27-.1c-.15 0-.48.24-.98.74s-.85.87-1.03 1.12a.44.44 0 0 0-.1.24c0 .08.04.17.11.25.47.56.84 1.04 1.12 1.44-.18.32-.31.64-.4.96l-1.95.29a.31.31 0 0 0-.2.13.4.4 0 0 0-.08.24v2.32c0 .09.03.17.09.24.05.07.12.12.22.13l1.9.28c.1.34.24.69.43 1.03l-.56.74c-.25.31-.43.54-.53.69a.4.4 0 0 0-.02.48c.28.37.85.96 1.72 1.75.08.08.17.11.26.11.1 0 .2-.03.26-.09l1.47-1.12c.29.15.6.28.94.4l.3 1.9c0 .1.04.17.11.23a.4.4 0 0 0 .26.09h2.31c.2 0 .33-.1.38-.3.09-.34.19-.98.3-1.93.32-.1.64-.23.95-.4l1.43 1.13c.1.06.2.1.27.1.16 0 .48-.25.98-.75.5-.49.85-.86 1.03-1.12.07-.07.1-.15.1-.24a.4.4 0 0 0-.1-.26c-.5-.61-.88-1.1-1.12-1.44.14-.26.27-.57.4-.95l1.93-.29a.32.32 0 0 0 .21-.13.4.4 0 0 0 .08-.24V9.87a.4.4 0 0 0-.08-.24m-6.03 3.27c-.52.52-1.15.78-1.89.78-.73 0-1.36-.26-1.88-.78A2.57 2.57 0 0 1 8.34 11c0-.74.26-1.36.78-1.89A2.57 2.57 0 0 1 11 8.34c.74 0 1.37.26 1.89.78.52.53.78 1.15.78 1.89s-.26 1.36-.78 1.89">
                        </path>
                    </svg>,
                    to allow lowercase letters.
                </div>
            </div>
        </div>

    </section>
</body>

<style>
    #generate-spongebob-meme-iframe {
        /* TODO: do not leave as vh units */
        height: 80vh;
        width: 80%;
    }

    .margin-b {
        margin-bottom: 20px;
    }

    .settings-icon {
        width: 26px;
        height: 26px;
    }
</style>


<script type="text/javascript">
    function flipACoin() {
        // Magic numbers are not okay.
        // I believe this is the ceiling value for the 
        // random number that's generated. It's non-inclusive,
        // only the numbers up to it, but not actually it.
        // Example, "* 4", could output: 0, 1, 2, 3

        // Hence this is 0 or 1, the odds are 50/50,
        // like flipping a coin.
        return Math.floor(Math.random() * 2);
    }

    function spongebobMockMemeGenerate(text) {
        const lettersForMeme = [];

        for (var i = 0; i < text.length; i++) {
            const letter = text.charAt(i);

            // We favor lowercase letters since it looks better 

            if (Math.random() < .30) {
                lettersForMeme.push(letter.toUpperCase());
            } else {
                lettersForMeme.push(letter.toLowerCase());
            }
        }
        return lettersForMeme.join("");
    }

    function showMockMemeText(event) {
        const userText = event.target.value;

        const mockMemeText = spongebobMockMemeGenerate(userText);

        const displayText = document.querySelector("#spongebob-mock-formatted-text");

        displayText.textContent = mockMemeText;
    }

    const textInput = document.querySelector("#textInput");
    textInput.addEventListener("input", showMockMemeText);

    const copyToClipboardButton = document.querySelector("#copy-to-clipboard-button");
    copyToClipboardButton.addEventListener("click", handleOnCopyToClipboard)

    function handleOnCopyToClipboard(event) {
        // Consideration: can't we just run the logic ourselves?
        // No, because that would generate another one, so it wouldn't 
        // match what's on the screen... Update the output text too??

        // Get the meme formatted text that's shown to the user
        const { textContent: spongebobMockMemeText } = document.querySelector("#spongebob-mock-formatted-text");

        // Copy the text to their clipboard, user can paste it now
        navigator.clipboard.writeText(spongebobMockMemeText);
    }
</script>

</html>